!function(){function e(){if(s)return s;var e={width:"1px",height:"1px",position:"absolute",top:"-100px"};return s=document.createElement("iframe"),s.setAttribute("style",Object.keys(e).map(function(n){return n+":"+e[n]}).join(";")),document.body.appendChild(s),s.onerror=s.onload=function(){setTimeout(function(){f&&f({error:D})},10)},s}function n(e,n){var t=g+e;return n.q=Date.now(),n=n&&Object.keys(n).map(function(e){return e+"="+encodeURIComponent(n[e])}).join("&"),n?t+"?"+n:t}function t(t,o){f=function(e){f=void 0,o(e)};var i={immediate:!0,response_type:"token",client_id:t.applicationID,redirect_uri:t.redirectURL};k(function(){e().src=n("/authorize",i),clearTimeout(y),y=setTimeout(function(){f&&f({error:_})},I)})}function o(e,n){n.pricingOptions&&n.pricingOptions.length&&(e.pricing_options=n.pricingOptions.join?n.pricingOptions.join(","):n.pricingOptions),n.summary&&(e.summary=!0)}function i(e,t){p=function(e){p=void 0,t(e)};var i={popup:!0,response_type:"token",client_id:e.applicationID,redirect_uri:e.redirectURL};o(i,e);var r={toolbar:"no",location:"no",directories:"no",status:"no",menubar:"no",scrollbars:"no",resizable:"no",copyhistory:"no",width:w,height:b,left:(screen.width-w)/2,top:(screen.height-b)/2};window.open(n("/authorize",i),void 0,Object.keys(r).map(function(e){return e+"="+r[e]}).join(","))}function r(){return m&&document.body.removeChild(m),m=document.createElement("script"),m.onerror=m.onload=function(){setTimeout(function(){l&&l({error:D})},10)},document.body.appendChild(m),m}function c(e){l=function(n){l=void 0,e(n)};var t={access_token:v.token,callback:"_monetizeJsonpCallback"};k(function(){r().src=n("/api/payments",t),clearTimeout(h),h=setTimeout(function(){l&&l({error:_})},I)})}function a(e){var t={client_id:e.applicationID,redirect_uri:e.redirectURL};o(t,e),window.location=n("/authorize",t)}function u(e,n){for(var t in n)e[t]=n[t]}function d(e){function n(e){return function(n,t){"function"==typeof n&&(t=n,n={});var i={};u(i,o),u(i,n||{}),e(i,t)}}var o={};u(o,j),u(o,e||{});var r={};return r.getTokenImmediate=n(function(e,n){return v&&v.token&&v.refreshDate>Date.now()?n(void 0,v.token):void t(e,function(e){n(e.error,e.token)})}),r.getPaymentsImmediate=n(function(e,n){return v&&v.token&&v.refreshDate>Date.now()?c(function(e){n(e.error,e.payments)}):void t(e,function(e){n(e.error,e.payments)})}),r.getTokenInteractive=n(function(e,n){return n?void i(e,function(e){n(e.error,e.token)}):a(e)}),r.getPaymentsInteractive=n(function(e,n){return n?void i(e,function(e){n(e.error,e.payments)}):a(e)}),r.getToken=n(function(e,n){return(e.immeditate?r.getTokenImmediate:r.getTokenInteractive)(e,n)}),r.getPayments=n(function(e,n){return(e.immeditate?r.getPaymentsImmediate:r.getPaymentsInteractive)(e,n)}),r}var s,m,f,p,l,v,y,h,k=function(){var e,n=[],t=/^loaded|c/.test(document.readyState),o="DOMContentLoaded";return document.addEventListener(o,e=function(){for(document.removeEventListener(o,e,!1),t=1;e=n.shift();)e()},!1),function(e){t?e():n.push(e)}}(),g="https://monetizejs.com",w=1e3,b=700,I=3e4,T=3e5,_="Request timeout",D="Please check your JS console";window.addEventListener("message",function(e){e.origin==g&&(v=e.data,v.expiresIn&&(v.refreshDate=Date.now()+v.expiresIn-T),v.popup?p&&p(v):(clearTimeout(y),f&&f(v)))}),window._monetizeJsonpCallback=function z(e){return window._monetizeJsonpCallback!==z?l&&l({error:"Callback replaced!"}):(clearTimeout(h),void(l&&l({payments:e})))};var j={redirectURL:window.location.href};window.MonetizeJS=d,"function"==typeof define&&define.amd&&define("monetizejs",[],function(){return d})}();